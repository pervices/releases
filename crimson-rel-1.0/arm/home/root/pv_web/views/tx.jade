extends ./layout.jade

block content
   p This page allows the configuration of the entire transmit chain from the digital backend to the RF frontend. Select the channel that is being configured.
   p The digital signal comes from the FPGA and gets interpolated through the DSP chain on the FPGA. The interpolation can go up to a maximum of 322 MSPS and can be frequency adjusted prior to DAC conversion. The digital signal is sent to the RF frontend using the JESD serial interface, providing the DAC with both IQ channel values. The analog signal passes through an RF switch for high band and low band selection. The high band is reserved for signals greater than 500 MHz and the low band is reserved for signals under 500 MHz. The high band offers a frequency mixer for up-conversion up to a maximum of 6 GHz.
   ul.nav.nav-tabs
      li.active(role="presentation")
         a#chan_a Channel A
      li(role="presentation")
         a#chan_b Channel B
      li(role="presentation")
         a#chan_c Channel C
      li(role="presentation")
         a#chan_d Channel D
   br
   b Channel Enable 
   input(type="checkbox", name='en', unchecked)#chan_en
   h3 Radio Configuration
   hr
   .container-fluid(style="text-align:center;")
      .row
         .col-md-1.right-pad-0
            p
               b RF Band
            input(type="checkbox", name='hi-low', unchecked)#rf_band
         .col-md-2.right-pad-0
            p
               b Synthesizer Frequency
            input.input-xs.width-100(type="text")#synth_freq
            |  Hz &nbsp;&nbsp;
            button.btn.btn-default.btn-xs#synth_freq_set Set
         .col-md-2.right-pad-0
            p
               b NCO Frequency
            input.input-xs.width-100(type="text")#dac_nco
            |  MHz &nbsp;&nbsp;
            button.btn.btn-default.btn-xs#dac_nco_set Set
         .col-md-3.right-pad-0
            p
               b IQ Voltage Bias
            .row
               .col-md-3.align-left#ibias_display I:
               .col-md-9
                  input(type='range', min='0', max='28', step='1')#ibias_range
            .row
               .col-md-3.align-left#qbias_display Q:
               .col-md-9
                  input(type='range', min='0', max='28', step='1')#qbias_range
            p
               .inline-block
         .col-md-4
            p
               b TX Gain - RFSA2013
            input(type='range', min='0', max='28', step='1')#gain_range
            p
               #gain_display.inline-block
                  
   img(src="/img/tx_chain.svg", style="max-width: 100%;max-height: 100%;").center
   h3 TX DSP Chain
   hr
   .container-fluid(style="text-align:center")
      .row
         .col-md-1
            p
               b Reset DSP
            button.btn.btn-default.btn-xs#dsp_reset Reset
         .col-md-2
            p
               b Phase Increment
            input.input-xs(type="text").width-100#dsp_nco
            |  Hz &nbsp;&nbsp;
            button.btn.btn-default.btn-xs#dsp_nco_set Set
         .col-md-5
            p
               b Sample Rate
            input(type='range', min='2', max='256', step='1')#sr_range
            p.no-margin
               | Effective sample rate:
               #sr_display.inline-block
         .col-md-4
            p
               b Origin Link
            .row.top-buffer-5
               .col-md-4.text-right
                  | IPV4 IP Address
               .col-md-4
                  input.input-xs(type="text", placeholder='configuration page', disabled)
               .col-md-4.text-left
                  button.btn.btn-default.btn-xs#link_set Set
            .row.top-buffer-5
               .col-md-4.text-right
                  | MAC Address
               .col-md-4
                  input.input-xs(type="text", placeholder='configuration page', disabled)
            .row.top-buffer-5
               .col-md-4.text-right
                  | UDP Port
               .col-md-4
                  input.input-xs(type="text")#port
   br
   br
   img(src="/img/tx_dsp.svg", style="max-width: 100%;max-height: 100%;").center
   br
   h3 TX Board Control
   hr
   .container-fluid
      .row
         .col-md-3
            b JESD Sync
            .row
               .col-md-4.top-buffer-5
                  button.btn.btn-default.btn-xs.btn-block#jesdsync Sync
            br
            b Channel IC's
            br
            .row
               .col-md-3.top-buffer-5.right-pad-0
                  | DAC
               .col-md-3.top-buffer-5.right-pad-0
                  | GPIOX
               .col-md-3.top-buffer-5.right-pad-0
                  | LED
            .row
               .col-md-3.top-buffer-5.right-pad-0
                  button.btn.btn-default.btn-xs.btn-block#dac_test Test
               .col-md-3.top-buffer-5.right-pad-0
                  button.btn.btn-default.btn-xs.btn-block#gpiox_test Test
               .col-md-3.top-buffer-5.right-pad-0
                  button.btn.btn-default.btn-xs.btn-block#led Test
            .row
               .col-md-3.top-buffer-5.right-pad-0
                  button.btn.btn-default.btn-xs.btn-block#dac_dump Dump
               .col-md-3.top-buffer-5.right-pad-0
                  button.btn.btn-default.btn-xs.btn-block#gpiox_dump Dump
            br
            b Channel State
            br
            .row
               .col-md-4.top-buffer-5
                  button.btn.btn-default.btn-xs.btn-block#chan_init Init
                  button.btn.btn-default.btn-xs.btn-block#chan_demo Demo
                  button.btn.btn-default.btn-xs.btn-block#chan_mute Mute
                  button.btn.btn-default.btn-xs.btn-block#chan_reset Reset
         .col-md-2
            b Board Version
            .row
               .col-md-6.top-buffer-5
                  button.btn.btn-default.btn-xs.btn-block#version Get
            br
            b Board Temperature
            .row
               .col-md-6.top-buffer-5
                  button.btn.btn-default.btn-xs.btn-block#temperature Get
         .col-md-7
            b Console Output
            br
            textarea.form-control#cout(rows='10')
